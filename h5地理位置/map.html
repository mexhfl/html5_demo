<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>地图应用</title>
<style>
#btn1{ background:#FFF; border:1px #000000 solid;}
#div1{ width:400px; height:400px; border:1px #000000 solid;}
</style>
<script src="http://api.map.baidu.com/api?v=1.3"></script>

<script>

window.onload=function(){
	var obtn=document.getElementById('btn1');
	var odiv=document.getElementById('div1');
	obtn.onclick=function(){
		navigator.geolocation.getCurrentPosition(function(position){
			var y=position.coords.longitude;
			var x=position.coords.latitude;
			
	var map = new BMap.Map("div1");
	var point = new BMap.Point(y,x);
	map.centerAndZoom(point, 15);
	var marker = new BMap.Marker(point);  // 创建标注
	map.addOverlay(marker);               // 将标注添加到地图中
	marker.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画
	map.enableScrollWheelZoom();     //允许滚轮缩放
	
	
/*	**添加文本标注
//============================
	var opts = {
	  position : point,    // 指定文本标注所在的地理位置
	  offset   : new BMap.Size(-50, -90)    //设置文本偏移量
	}
	var label = new BMap.Label("这是一个简单的文本标注哦~", opts);  // 创建文本标注对象
			label.setStyle({
			 color : "red",
			 fontSize : "12px",
			 height : "20px",
			 lineHeight : "20px",
			 fontFamily:"微软雅黑"
		 });
	map.addOverlay(label);
//============================*/  

//纯文本信息窗口
	var opts = {
	  width : 100,     // 信息窗口宽度
	  height: 50,     // 信息窗口高度
	  title : "创鑫云工作室" , // 信息窗口标题
	  enableMessage:true,//设置允许信息窗发送短息
	  message:"专注网站建设二十年"
	}
	var infoWindow = new BMap.InfoWindow("地址：山西省晋中市榆次区体育西路", opts);  // 创建信息窗口对象 
	marker.addEventListener("click", function(){          
		map.openInfoWindow(infoWindow,point); //开启信息窗口
	});

//==============================创建自定义标注
	var pt = new BMap.Point(y+0.01, x+0.01);
	var myIcon = new BMap.Icon("http://developer.baidu.com/map/jsdemo/img/fox.gif", new BMap.Size(300,157));
	var marker2 = new BMap.Marker(pt,{icon:myIcon});  // 创建标注
	map.addOverlay(marker2);              // 将标注添加到地图中
//======================

			});
		}
	}


</script>
</head>

<body>
<input id="btn1" type="button" value="请求"/>
<div id="div1"></div>

</body>
</html>
